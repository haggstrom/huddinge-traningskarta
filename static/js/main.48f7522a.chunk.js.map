{"version":3,"sources":["components/TrainingLocationList.js","util/geoUtil.js","util/styles.js","util/mapUtil.js","components/SimplePopup.js","components/IconLink.js","components/AuthorPanel.js","App.js","serviceWorker.js","index.js","css/AuthorPanel.module.css","css/TrainingLocationList.module.css","css/SimplePopup.module.css","img/gym/man-gym.png","img/gym/man-gym-selected.png","img/gym/woman-gym.png","img/gym/woman-gym-selected.png"],"names":["Panel","Collapse","TrainingLocationList","key","header","locationNames","onLocationClicked","className","styles","trainingLocationCollapse","dataSource","renderItem","locationName","Item","Text","trainingLocationName","onClick","geoUtil","registerProjections","proj4","defs","register","getSortedFeatureName","features","Set","map","tf","getProperties","sort","readFeatures","geoJson","GeoJSON","transformFeatures","sourceProj","destProj","getGeometry","transform","toFeatures","type","setProperties","bufferExtent","extent","bufferValue","buffer","getBufferedExtent","feature","bufferVal","getExtent","extentToFeature","polygon","fromExtent","Feature","geometry","getExtentOfFeaturesByName","name","areaFeatures","filter","createEmpty","forEach","extend","manIconStyle","Style","image","Icon","src","manGymIcon","scale","womanIconStyle","womanGymIcon","manSelectedIconStyle","manGymSelectedIcon","womanSelectedIconStyle","womanGymSelectedIcon","kommunStyle","stroke","Stroke","color","width","fill","Fill","trackStyles","lineDash","lineDashOffset","trackStylesHover","hoverStyleFunction","mapUtil","createView","OlView","projection","center","zoom","maxZoom","createMap","view","interactions","defaults","altShiftDragRotate","pinchRotate","OlMap","layers","OlLayerTile","source","OlSourceOsm","createHuddingeLayer","huddingeFeature","huddingeLayer","VectorLayer","VectorSource","style","getSource","addFeature","createGymLayer","gymFeatures","outDoorGymLayer","layerId","setIconOnGymFeatures","addFeatures","createTrackLayer","trackFeatures","trackLayer","setStylesOnTracks","tracks","track","setStyle","man","icon","iconHover","woman","randomOrderIcons","Math","random","gym","index","icons","hoverStyle","getHuddingeFeature","translate","featureExtent","extentFeature","linearRing","getLinearRing","Polygon","getCoordinates","appendLinearRing","SimplePopup","popupId","title","text","onClose","popupContainer","id","popupCard","size","extra","CloseOutlined","IconLink","link","linkTitle","href","rel","target","AuthorPanel","authorCard","textContainer","iconContainer","LinkedinOutlined","GithubOutlined","isGymOrTrackLayer","layer","get","select","Select","condition","pointerMove","addInteraction","huddingeJson","addLayer","outdoorGyms","gymLayer","popup","Overlay","onPopupClose","setPosition","undefined","App","useState","visible","setVisible","hoveredFeatureName","setHoveredFeatureName","hoveredFeatureType","setHoveredFeatureType","trackNames","gymNames","toggleDrawer","on","evt","forEachFeatureAtPixel","pixel","getElement","setElement","document","getElementById","addOverlay","typeName","coordinate","placement","mask","footer","trackName","isMobile","buffered","getView","fit","gymName","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","module","exports"],"mappings":"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","file":"static/js/main.48f7522a.chunk.js","sourcesContent":["import React from \"react\";\nimport { List, Typography } from \"antd\";\nimport { Collapse } from \"antd\";\nimport styles from \"../css/TrainingLocationList.module.css\";\nconst { Panel } = Collapse;\n\nconst TrainingLocationList = ({\n  key,\n  header,\n  locationNames,\n  onLocationClicked,\n}) => {\n  return (\n    <Collapse className={styles.trainingLocationCollapse}>\n      <Panel header={header} className=\"trainingLocationPanel\" key={key}>\n        <List\n          dataSource={locationNames}\n          renderItem={(locationName) => (\n            <List.Item>\n              <Typography.Text\n                className={styles.trainingLocationName}\n                onClick={() => onLocationClicked(locationName)}\n              >\n                {locationName}\n              </Typography.Text>\n            </List.Item>\n          )}\n        />\n      </Panel>\n    </Collapse>\n  );\n};\n\nexport default TrainingLocationList;\n","import proj4 from \"proj4\";\nimport { register } from \"ol/proj/proj4\";\nimport GeoJSON from \"ol/format/GeoJSON\";\nimport { createEmpty, extend } from \"ol/extent\";\nimport { buffer } from \"ol/extent\";\nimport { fromExtent } from \"ol/geom/Polygon\";\nimport Feature from \"ol/Feature\";\n\nconst geoUtil = {\n  registerProjections: () => {\n    // EPSG:4326 - WGS 84\n    proj4.defs(\n      \"EPSG:4326\",\n      \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs \"\n    );\n\n    // EPSG:3006 - SWEREF99 TM\n    proj4.defs(\n      \"EPSG:3006\",\n      \"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\"\n    );\n\n    // EPSG:3011 - SWEREF99 18 00\n    proj4.defs(\n      \"EPSG:3011\",\n      \"+proj=tmerc +lat_0=0 +lon_0=18 +k=1 +x_0=150000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\"\n    );\n\n    // EPSG:3857 - WGS84 Web Mercator\n    proj4.defs(\n      \"EPSG:3857\",\n      \"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs\"\n    );\n\n    register(proj4);\n  },\n\n  getSortedFeatureName: (features) => {\n    return [\n      ...new Set(\n        features.map((tf) => {\n          return tf.getProperties()[\"name\"];\n        })\n      ),\n    ].sort();\n  },\n\n  readFeatures: (geoJson) => {\n    return new GeoJSON().readFeatures(geoJson);\n  },\n\n  transformFeatures: (features, sourceProj, destProj) => {\n    features.map((tf) => {\n      return tf.getGeometry().transform(sourceProj, destProj);\n    });\n  },\n\n  toFeatures: (geoJson, type) => {\n    var features = geoUtil.readFeatures(geoJson);\n    features.map((tf) => {\n      return tf.setProperties({ type: type });\n    });\n    geoUtil.transformFeatures(features, \"EPSG:3011\", \"EPSG:3006\");\n    return features;\n  },\n\n  bufferExtent: (extent, bufferValue) => {\n    return buffer(extent, bufferValue);\n  },\n\n  getBufferedExtent: (feature, bufferVal) => {\n    return geoUtil.bufferExtent(feature.getGeometry().getExtent(), bufferVal);\n  },\n\n  extentToFeature: (extent) => {\n    const polygon = fromExtent(extent);\n    var feature = new Feature({\n      geometry: polygon,\n    });\n    return feature;\n  },\n\n  getExtentOfFeaturesByName: (features, name) => {\n    var areaFeatures = features.filter(\n      (tf) => tf.getProperties()[\"name\"] === name\n    );\n    var extent = createEmpty();\n    areaFeatures.forEach(function (feature) {\n      extend(extent, feature.getGeometry().getExtent());\n    });\n    return extent;\n  },\n};\nexport default geoUtil;\n","import { Style, Fill, Stroke } from \"ol/style\";\nimport { Icon } from \"ol/style\";\nimport manGymIcon from \"../img/gym/man-gym.png\";\nimport manGymSelectedIcon from \"../img/gym/man-gym-selected.png\";\nimport womanGymIcon from \"../img/gym/woman-gym.png\";\nimport womanGymSelectedIcon from \"../img/gym/woman-gym-selected.png\";\n\nconst ICON_SCALE = 0.25;\nconst styles = {\n\n\n  manIconStyle: new Style({\n    image: new Icon({\n      src: manGymIcon,\n      scale: ICON_SCALE,\n    }),\n  }),\n\n  womanIconStyle: new Style({\n    image: new Icon({\n      src: womanGymIcon,\n      scale: ICON_SCALE,\n    }),\n  }),\n\n  manSelectedIconStyle: new Style({\n    image: new Icon({\n      src: manGymSelectedIcon,\n      scale: ICON_SCALE,\n    }),\n  }),\n\n  womanSelectedIconStyle: new Style({\n    image: new Icon({\n      src: womanGymSelectedIcon,\n      scale: ICON_SCALE,\n    }),\n  }),\n\n  kommunStyle: new Style({\n    stroke: new Stroke({\n      color: \"grey\",\n      width: 3,\n    }),\n    fill: new Fill({\n      color: \"rgba(232, 232, 232, 0.5)\",\n    }),\n  }),\n\n  trackStyles: [\n    new Style({\n      stroke: new Stroke({\n        color: \"black\",\n        lineDash: [1, 2.5],\n        width: 4,\n        lineDashOffset: 0,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: \"rgb(204,144,122)\",\n        lineDash: [1, 2.5],\n        width: 2.5,\n        lineDashOffset: 0,\n      }),\n    }),\n  ],\n\n  trackStylesHover: [\n    new Style({\n      stroke: new Stroke({\n        color: \"blue\",\n        lineDash: [1, 2.5],\n        width: 6,\n        lineDashOffset: 0,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: \"rgb(204,144,122)\",\n        lineDash: [1, 2.5],\n        width: 2.5,\n        lineDashOffset: 0,\n      }),\n    }),\n  ],\n\n  hoverStyleFunction: (feature) => {\n    if (feature.getProperties()[\"type\"] === \"track\") {\n      return styles.trackStylesHover;\n    }\n    if (feature.getProperties()[\"type\"] === \"gym\") {\n      return feature.getProperties()[\"hoverStyle\"];\n    }\n    return undefined;\n  },\n};\n\nexport default styles;\n","import geoUtil from \"./geoUtil\";\nimport Polygon from \"ol/geom/Polygon\";\nimport Feature from \"ol/Feature\";\nimport styles from \"./styles\";\nimport OlView from \"ol/View\";\nimport { defaults } from \"ol/interaction\";\nimport OlMap from \"ol/Map\";\nimport OlLayerTile from \"ol/layer/Tile\";\nimport OlSourceOsm from \"ol/source/OSM\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\n\nexport const GYM_LAYER_ID = \"gym-layer\";\nexport const TRACK_LAYER_ID = \"track-layer\";\n\nconst mapUtil = {\n  createView: () => {\n    return new OlView({\n      projection: \"EPSG:3006\",\n      center: [672382.9310966722, 6567779.94859146],\n      zoom: 12,\n      maxZoom: 20,\n      extent: [\n        // extent = kommun extent buff 75000\n        655435.1179635252,\n        6552348.911293099,\n        689330.7442298192,\n        6583210.985889821,\n      ],\n    });\n  },\n\n  createMap: (view) => {\n    const interactions = defaults({\n      altShiftDragRotate: false,\n      pinchRotate: false,\n    });\n    return new OlMap({\n      view: view,\n      layers: [\n        new OlLayerTile({\n          source: new OlSourceOsm(),\n        }),\n      ],\n      interactions: interactions,\n    });\n  },\n\n  createHuddingeLayer: (huddingeFeature) => {\n    const huddingeLayer = new VectorLayer({\n      source: new VectorSource({}),\n      style: styles.kommunStyle,\n    });\n    huddingeLayer.getSource().addFeature(huddingeFeature);\n    return huddingeLayer;\n  },\n\n  createGymLayer: (gymFeatures) => {\n    const outDoorGymLayer = new VectorLayer({\n      layerId: GYM_LAYER_ID,\n      source: new VectorSource({}),\n    });\n\n    mapUtil.setIconOnGymFeatures(gymFeatures);\n    outDoorGymLayer.getSource().addFeatures(gymFeatures);\n    return outDoorGymLayer;\n  },\n\n  createTrackLayer: (trackFeatures) => {\n    const trackLayer = new VectorLayer({\n      layerId: TRACK_LAYER_ID,\n      source: new VectorSource({}),\n    });\n\n    mapUtil.setStylesOnTracks(trackFeatures);\n    trackLayer.getSource().addFeatures(trackFeatures);\n    return trackLayer;\n  },\n\n  setStylesOnTracks: (tracks) => {\n    tracks.map((track) => {\n      return track.setStyle(styles.trackStyles);\n    });\n  },\n\n  setIconOnGymFeatures: (gymFeatures) => {\n    const man = {\n      icon: styles.manIconStyle,\n      iconHover: styles.manSelectedIconStyle,\n    };\n\n    const woman = {\n      icon: styles.womanIconStyle,\n      iconHover: styles.womanSelectedIconStyle,\n    };\n\n    const randomOrderIcons = Math.random() >= 0.5 ? [man, woman] : [woman, man];\n\n    gymFeatures.map((gym, index) => {\n      var icons = randomOrderIcons[index % 2];\n      gym.setProperties({ hoverStyle: icons.iconHover });\n      return gym.setStyle([icons.icon]);\n    });\n  },\n\n  getHuddingeFeature: (geoJson) => {\n    const features = geoUtil.readFeatures(geoJson);\n    geoUtil.transformFeatures(features, \"EPSG:4326\", \"EPSG:3006\");\n\n    // Translate to better fit map\n    features[0].getGeometry().translate(-100, -170);\n    const featureExtent = geoUtil.getBufferedExtent(features[0], 15000);\n    const extentFeature = geoUtil.extentToFeature(featureExtent);\n    const linearRing = features[0].getGeometry().getLinearRing();\n\n    const polygon = new Polygon(extentFeature.getGeometry().getCoordinates());\n    polygon.appendLinearRing(linearRing);\n    var polygonFeature = new Feature({\n      geometry: polygon,\n    });\n    return polygonFeature;\n  },\n};\n\nexport default mapUtil;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport styles from \"../css/SimplePopup.module.css\";\nimport { CloseOutlined } from \"@ant-design/icons\";\n\nconst SimplePopup = ({ popupId, title, text, onClose }) => {\n  return (\n    <div className={styles.popupContainer}>\n      <div id={popupId}>\n        <Card\n          className={styles.popupCard}\n          size=\"small\"\n          title={title}\n          extra={<CloseOutlined onClick={onClose} />}\n        >\n          <p>{text}</p>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default SimplePopup;\n","import React from \"react\";\n\nconst IconLink = ({ icon, link, linkTitle }) => {\n  return (\n    <a href={link} title={linkTitle} rel=\"noopener noreferrer\" target=\"_blank\">\n      {icon}\n    </a>\n  );\n};\n\nexport default IconLink;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport { GithubOutlined, LinkedinOutlined } from \"@ant-design/icons\";\nimport styles from \"../css/AuthorPanel.module.css\";\nimport IconLink from \"./IconLink\";\n\nconst AuthorPanel = () => {\n  return (\n    <Card className={styles.authorCard} size=\"small\">\n      <div className={styles.textContainer}>\n        <h4>Kartan är skapad av</h4>\n        Anders Häggström\n      </div>\n\n      <div className={styles.iconContainer}>\n        <IconLink\n          link={\"https://www.linkedin.com/in/anders-haggstrom/\"}\n          linkTitle={\"Anders Häggström på LinkedIn\"}\n          icon={<LinkedinOutlined className={styles.icon} />}\n        />\n\n        <IconLink\n          link={\"https://github.com/haggstrom/\"}\n          linkTitle={\"Anders Häggström på GitHub\"}\n          icon={<GithubOutlined className={styles.icon} />}\n        />\n      </div>\n    </Card>\n  );\n};\n\nexport default AuthorPanel;\n","import React, { useState } from \"react\";\n\nimport \"ol/ol.css\";\nimport \"antd/dist/antd.css\";\nimport \"./css/App.css\";\nimport \"./css/react-geo.css\";\n\nimport { SimpleButton, MapComponent } from \"@terrestris/react-geo\";\nimport { Drawer } from \"antd\";\nimport tracks from \"./data/tracks.json\";\nimport outdoorGyms from \"./data/outdoorGyms.json\";\nimport huddingeJson from \"./data/huddinge.json\";\nimport TrainingLocationList from \"./components/TrainingLocationList\";\nimport geoUtil from \"./util/geoUtil\";\nimport mapUtil, { GYM_LAYER_ID, TRACK_LAYER_ID } from \"./util/mapUtil\";\nimport SimplePopup from \"./components/SimplePopup\";\nimport Select from \"ol/interaction/Select\";\nimport Overlay from \"ol/Overlay\";\nimport { pointerMove } from \"ol/events/condition\";\nimport styles from \"./util/styles\";\nimport AuthorPanel from \"./components/AuthorPanel\";\nimport { isMobile } from \"react-device-detect\";\n\nconst POPUP_ID = \"my-popup\";\n\ngeoUtil.registerProjections();\n\nconst view = mapUtil.createView();\nconst map = mapUtil.createMap(view);\n\nconst isGymOrTrackLayer = (layer) => {\n  return (\n    layer.get(\"layerId\") &&\n    (layer.get(\"layerId\") === GYM_LAYER_ID ||\n      layer.get(\"layerId\") === TRACK_LAYER_ID)\n  );\n};\n\nconst select = new Select({\n  condition: pointerMove,\n  style: styles.hoverStyleFunction,\n  layers: function (layer) {\n    return isGymOrTrackLayer(layer);\n  },\n});\nmap.addInteraction(select);\n\nconst huddingeFeature = mapUtil.getHuddingeFeature(huddingeJson);\nconst huddingeLayer = mapUtil.createHuddingeLayer(huddingeFeature);\nmap.addLayer(huddingeLayer);\n\nconst trackFeatures = geoUtil.toFeatures(tracks, \"track\");\nconst trackLayer = mapUtil.createTrackLayer(trackFeatures);\nmap.addLayer(trackLayer);\n\nconst gymFeatures = geoUtil.toFeatures(outdoorGyms, \"gym\");\nconst gymLayer = mapUtil.createGymLayer(gymFeatures);\nmap.addLayer(gymLayer);\n\nconst popup = new Overlay({});\n\nconst onPopupClose = () => {\n  popup.setPosition(undefined);\n};\n\nfunction App() {\n  const [visible, setVisible] = useState(false);\n  const [hoveredFeatureName, setHoveredFeatureName] = useState(\"\");\n  const [hoveredFeatureType, setHoveredFeatureType] = useState(\"\");\n\n  const trackNames = geoUtil.getSortedFeatureName(trackFeatures);\n  const gymNames = geoUtil.getSortedFeatureName(gymFeatures);\n  \n  const toggleDrawer = () => {\n    setVisible(!visible);\n  };\n\n  const centerOnTrack = (trackName) => {\n    if (isMobile) {\n      setVisible(!visible);\n    }\n    var extent = geoUtil.getExtentOfFeaturesByName(trackFeatures, trackName);\n    var buffered = geoUtil.bufferExtent(extent, 200);\n    map.getView().fit(buffered);\n  };\n\n  const centerOnGym = (gymName) => {\n    if (isMobile) {\n      setVisible(!visible);\n    }\n    var extent = geoUtil.getExtentOfFeaturesByName(gymFeatures, gymName);\n    var buffered = geoUtil.bufferExtent(extent, 100);\n    map.getView().fit(buffered);\n  };\n\n  map.on(\"click\", function (evt) {\n    var feature = map.forEachFeatureAtPixel(evt.pixel, (feature, layer) => {\n      if (isGymOrTrackLayer(layer)) {\n        return feature;\n      }\n    });\n    if (feature) {\n      if (!popup.getElement()) {\n        popup.setElement(document.getElementById(POPUP_ID));\n        map.addOverlay(popup);\n      }\n      setHoveredFeatureName(feature.getProperties()[\"name\"]);\n      const typeName =\n        feature.getProperties()[\"type\"] === \"gym\" ? \"Utegym\" : \"Elljusspår\";\n      setHoveredFeatureType(typeName);\n      popup.setPosition(evt.coordinate);\n    } else {\n      popup.setPosition(undefined);\n    }\n  });\n\n  return (\n    <div className=\"App\">\n      <MapComponent map={map} />\n\n      <SimplePopup\n        popupId={POPUP_ID}\n        title={hoveredFeatureType}\n        text={hoveredFeatureName}\n        onClose={onPopupClose}\n      />\n\n      <SimpleButton\n        title=\"Visa Träningsplatser\"\n        className=\"showDrawerButton\"\n        type=\"primary\"\n        onClick={toggleDrawer}\n      >\n        Träningsplatser\n      </SimpleButton>\n\n      <Drawer\n        title=\"Träningsplatser i Huddinge\"\n        placement=\"right\"\n        onClose={toggleDrawer}\n        visible={visible}\n        mask={false}\n        footer={<AuthorPanel />}\n      >\n        <TrainingLocationList\n          key=\"1\"\n          header=\"Elljusspår\"\n          locationNames={trackNames}\n          onLocationClicked={centerOnTrack}\n        />\n        <TrainingLocationList\n          key=\"2\"\n          header=\"Utegym\"\n          locationNames={gymNames}\n          onLocationClicked={centerOnGym}\n        />\n      </Drawer>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authorCard\":\"AuthorPanel_authorCard__3ab0h\",\"textContainer\":\"AuthorPanel_textContainer__20e9H\",\"iconContainer\":\"AuthorPanel_iconContainer__VGnOK\",\"icon\":\"AuthorPanel_icon__KlhJG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"trainingLocationCollapse\":\"TrainingLocationList_trainingLocationCollapse__3NRDb\",\"trainingLocationName\":\"TrainingLocationList_trainingLocationName__2-JLP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popupContainer\":\"SimplePopup_popupContainer__3vwtk\",\"popupCard\":\"SimplePopup_popupCard__3WKbe\"};","module.exports = __webpack_public_path__ + \"static/media/man-gym.2d45dabd.png\";","module.exports = __webpack_public_path__ + \"static/media/man-gym-selected.be9fc525.png\";","module.exports = __webpack_public_path__ + \"static/media/woman-gym.dc141b1d.png\";","module.exports = __webpack_public_path__ + \"static/media/woman-gym-selected.0fb3be83.png\";"],"sourceRoot":""}